> 参考学习资料：
>
> 1. 《第一行代码》——郭霖
> 2. 郭霖公众号博客和其他博客
> 3. 谷歌开发者——Android

# 简介

Android已经占领了越来越大的市场份额，除了苹果手机，Android手机似乎已经不可获取，而Android开发者也变得不可或缺。

## Android系统架构

Android大致可以分为四层架构：Linux内核层、系统运行库层、应用框架层和应用层。如图所示：

![Android 操作系统的架构示意图](http://c.biancheng.net/uploads/allimg/190327/5-1Z32G5124H60.gif)

1. **Linux内核层**

   Android系统是基于Linux内核的，这一层为Android设备的各种硬件提供了底层的驱动，如图中所提到的内容。

2. **系统运行层**

   这一层通过一些C/C++库来为Android系统提供了主要的特性支持。如SQLite库提供了数据库的支持，OpenGL|ES库提供了3D绘图的支持，Webkit提供了浏览器内核的支持等。

   同样在这一层还有Android运行时库，它主要提供了一些核心库，能够允许开发者使用Java语言来编写Android应用。另外，Android运行时库中还包含了Dalvik虚拟机（5.0系统之后改为ART运行环境），它使得每一个Android应用都能运行在独立的进程当中，并且拥有一个自己的Dalvik虚拟机实例。相较于Java虚拟机，Dalvik是专门为移动设备定制的，它针对手机内存、CPU性能有限等情况做了优化处理。

3. **应用框架层**

   这一层主要提供了构建应用程序时可能用到的各种API，Android自带的一些核心应用就是使用这些API完成的，开发者也可以通过使用这些API来构建自己的应用程序。

4. **应用层**

   所有安装在手机上的应用程序都属于这一层的。

## Android已发布版本

2008年9月，谷歌正式发布了Android 1.0系统，至此，目前已经更新到9.0，11.0很快就会发布。可以在https://developer.android.google.cn/about/dashboards查看目前已经发布的Android系统版本和详细信息。

## Andorid特色

1. **四大组件**

   **活动（Activity）**：是所有Android应用程序的门面，凡是在应用中能看到的东西，都是放在活动中的；

   **服务（Service）**：无法看见，但它会一直在后台默默地运行，即使用户退出了应用，服务仍然是可以继续运行的；

   **广播接收器（Broadcast Receiver）**：允许你的应用接收来自各处的广播消息，比如电话、短信等，当然你的应用同样也可以向外发出广播消息。

   **内容提供器（Content Provider）**：为应用程序之间共享数据提供了可能，比如你想要读取系统电话簿中的联系人，就需要通过其来实现。

2. **丰富的系统控件**

   Android系统为开发者提供了丰富的系统控件，但是一般情况下都是按照需求进行设计；使用第三方控件比较常见，值得一提的是Material Design的控件。

3. **SQLite数据库**

   Android自带的轻量级、运算速度极快的嵌入式关系型数据库。它不仅支持标准的SQL语法，还可以通过Android封装好的API进行操作，让使用更简单。

4. **强大的多媒体**

   如音乐、视频、录音、拍照、闹钟等，这一切都可以在程序中通过代码进行控制。

5. **地理位置定位**

   目前使用地理位置定位使用第三方比较多，如高德地图API。

# 安装

需要安装的东西：

1. JDK：是Java语言的软件开发工具包，包含了Java的运行环境、工具集合、基础类库等内容。确保你安装的JDK版本在8或者以上。
2. Android SDK：是谷歌提供的Android开发工具包，在开发Android程序时，必须引入该工具包，来使用Android相关的API。
3. Android Studio：谷歌退出的官方IDE工具，相比于Eclipse，AS要强大和方便得多。

首先安装JDK，网上很多详细教程，我在Java部分也发过，一句话概括就是下载+修改环境变量；

其次时安装Android Studio，值得庆幸的是，你不用自己下载SDK，直接下载安装Android Studio，附带就有SDK的下载。

在官网下载好Android Studio，如果你害怕解决问题，可以选择前几个版本的Android Studio，因为最新版本可能存在一些新特性并不熟悉，你遇到了问题查不到解决方案，但其实更新的都是稳定版本，更新内容也都在谷歌开发者——Android部分有详细介绍，只不过有些部分可能会是英文。但是，下载最新版的AS，你会发现编写代码会更加简单和方便，而这些新特性是你需要熟悉运用的。

**接下来就是安装部分了：**

保持默认，勾选全部内容

![image-20200709171823654](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709171823654.png)

然后就是选择安装AS的目录，一般修改到非C盘即可，接下来一直下一步即可

![image-20200709171904084](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709171904084.png)

安装结束后，打开AS，会出现下面提示，这是因为我们还没有安装SDK，点击cancel取消，就会跳转到下载页面

![image-20200709172255265](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709172255265.png)

一般情况下，都会默认勾选最新的SDK，点击下一步安装即可

![image-20200709172335227](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709172335227.png)

![image-20200709172414140](../../../../AppData/Roaming/Typora/typora-user-images/image-20200709172414140.png)

安装结束后再打开AS，就可以新建项目了

![image-20200709173556914](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709173556914.png)

# 运行第一条代码

点击新建一个项目，选择Empty Project即可，点击下一步

![image-20200709173650274](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709173650274.png)

然后修改项目名和存放位置，其他地方保持不变即可，点击完成

点击右上角绿色三角旁，然后点击open AVD Manager，创建一个新的模拟器

![image-20200709192248058](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709192248058.png)

然后随便点击一个系统版本进行下载

![image-20200709192451665](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709192451665.png)

选中Accept之后才能点击下一步开始下载

![image-20200709192537470](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709192537470.png)

下载结束后点击三角符号即可打开模拟器

点击AS右上角的绿色三角，即可将此应用在模拟器上打开

![image-20200709193457129](https://raw.githubusercontent.com/PeachLuis/Pic_Go/master/image-20200709193457129.png)

# 日志工具的使用

Android本身为我们提供了五个方法来打印日志：

1. Log.v()
这个方法用于打印那些最为琐碎的，意义最小的日志信息。对应级别verbose，是Android 日志里面级别最低的一种。
2. Log.d()
这个方法用于打印一些调试信息，这些信息对你调试程序和分析问题应该是有帮助的。对应级别debug，比verbose 高一级。
3. Log.i()
这个方法用于打印一些比较重要的数据，这些数据应该是你非常想看到的，可以帮你分析用户行为的那种。对应级别info，比debug 高一级。
4. Log.w()
这个方法用于打印一些警告信息，提示程序在这个地方可能会有潜在的风险，最好去修复一下这些出现警告的地方。对应级别warn，比info 高一级。
5. Log.e()
这个方法用于打印程序中的错误信息，比如程序进入到了catch 语句当中。当有错误信息打印出来的时候，一般都代表你的程序出现严重问题了，必须尽快修复。对应级别error，比warn 高一级。

使用Log而不是System.out是为了更好的过滤不同级别的日志

一般情况下Log方法结合Logcat使用

下面介绍一个好用的方法,能在项目上线后取消所有的Log

```java
/**
 * 日志工具类
 */
public class LogUtil {

    public static final int VERBOSE = 1;
    public static final int DEBUG = 2;
    public static final int INFO = 3;
    public static final int WARN = 4;
    public static final int ERROR = 5;
    public static final int NOTHING = 6;
    public static int LEVEL = VERBOSE;

    /**
     * 设置LEVEL的类型
     *
     * @param type
     */
    public static void setLEVEL(int type) {
        LEVEL = type;
    }

    public static void v(String tag, String msg) {
        if (LEVEL <= VERBOSE) {
            Log.v(tag, msg);
        }
    }

    public static void d(String tag, String msg) {
        if (LEVEL <= DEBUG) {
            Log.d(tag, msg);
        }
    }

    public static void i(String tag, String msg) {
        if (LEVEL <= INFO) {
            Log.i(tag, msg);
        }
    }

    public static void w(String tag, String msg) {
        if (LEVEL <= WARN) {
            Log.w(tag, msg);
        }
    }

    public static void e(String tag, String msg) {
        if (LEVEL <= ERROR) {
            Log.e(tag, msg);
        }
    }
}

//当项目上线后就调用此方法，可注释掉所有Log方法
//LogUtil.setLEVEL(LogUtil.NOTHING);

```

# 项目结构

Android Studio 中的每个项目都包含一个或多个含源代码文件和资源文件的模块。模块类型包括：

- Android 应用模块
- 库模块
- Google App Engine 模块

默认情况下，Android Studio 会在 Android 项目视图中显示您的项目文件（如图所示）。该视图按模块组织结构，方便您快速访问项目的关键源文件。

所有编译文件都在顶层的 **Application** 下显示，且每个应用模块都包含以下文件夹：

- **manifests**：包含 `AndroidManifest.xml` 文件。
- **java**：包含 Java 源代码文件，包括 JUnit 测试代码。
- **res**：包含所有非代码资源，例如 XML 布局、界面字符串和位图图像。

磁盘上的 Android 项目结构与此扁平表示形式的项目结构有所不同。要查看项目的实际文件结构，请从 **Project** 下拉菜单中选择 **Project**（在图 1 中显示为 **Android**）。

<img src="https://developer.android.google.cn/studio/images/intro/project-android-view_2-1_2x.png?hl=zh-cn" style="zoom:50%;" />