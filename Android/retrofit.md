![image-20210302201813900](img/image-20210302201813900.png)

![image-20210302201905896](img/image-20210302201905896.png)

![image-20210302201917735](img/image-20210302201917735.png)

retrofit是对okhttp的封装，解决了okhttp中以上四大问题

![image-20210302202520616](img/image-20210302202520616.png)

![image-20210302202718965](img/image-20210302202718965.png)

基于http协议的8种规则

统一的规则适配网络请求：使用注解按照一定的策略来调配：URL；所以使用注解

retrofit使用**代理模式**——动态代理

retrofit只是okhttp的代理

![image-20210302202908322](img/image-20210302202908322.png)

![image-20210302203943897](img/image-20210302203943897.png)

Retrofit种的Builder方法采用**构建者模式，门面模式**

什么时候采用构建者模式？：构造函数超过5个，而且是可选的默认的

门面模式（外观模式）：Retrofit并没有带来其他别的功能，只是保存了很多东西，并配置好其中的成员变量

![image-20210302205350728](img/image-20210302205350728.png)

retrofit.create使用**反射+动态代理**实现返回一个**接口对象**

静态代理：有一个具体的代理类存在

![image-20210302210801593](img/image-20210302210801593.png)

![image-20210302211505444](img/image-20210302211505444.png)

动态代理：没有具体的代理类存在

![image-20210302212144407](img/image-20210302212144407.png)

![image-20210302212154964](img/image-20210302212154964.png)

